# Lint and format staged files
bun run lint-staged

# Typecheck the entire project
bun run typecheck

# Check for unused exports/dependencies
bun run knip --fix

# Run tests related to changed files
CHANGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep -E '\.(ts|tsx)$' | grep -v '\.test\.' | grep -v '\.d\.ts$' || true)
if [ -n "$CHANGED_FILES" ]; then
  echo "Running tests related to changed files..."
  echo "$CHANGED_FILES" | xargs bun run test --findRelatedTests --passWithNoTests
fi
